# consul-data-gen
This repo contains a library for generating data to push into Consul, a command line client for outputting that generated data and some terraform code to use that data and push it to Consul.

## Library

The `generate` subdirectory contains the top level package for all data generators. Subpackages are for generating a specific type of data.

## CLI

### Installation

`go get github.com/mkeeler/consul-data-gen/cmd/consul-data-gen`

### Usage (Top Level)

```
Usage: consul-data-gen [--version] [--help] <command> [<args>]

Available commands are:
    kv    Generate KV data for Consul
```

### Usage (KV)

```
Usage: consul-data-gen kv [OPTIONS] [output path]

        Generate KV data for consul.

        By default the generated output is sent to the console but
        an optional output path may be used to cause it to be written
        to a file

Command Options

  -num-entries=<int>
     Number of KV entries to generate

  -pet-name-len=<int>
     Length in words of the randomly generated KV key pet names

  -pet-name-prefix=<string>
     Prefix for KV key pet names

  -pet-name-separator=<string>
     Separator char for KV key pet names

  -rand-value-max=<int>
     Maximum byte size of random KV values to create

  -rand-value-min=<int>
     Minimum byte size of random KV values to create

  -seed=<int>
     Value to use to seed the pseudo-random number generator with
     instead of the current time
```

## Terraform

We can use the `consul-data-gen` subcommands to generate the various input files required by the terraform provider. After that you are a simple `terraform apply` away from pushing all the data into Consul.

### Variables

* `consul_address` - **(Optional)** Allows you to override the Consul HTTP API addresses used by the Consul Terraform provider
* `consul_token` - **(Optional)** Allows you to set a Consul ACL token for use by the Consul Terraform provider.
* `kv_data` - **(Required)** Path to the kv data generated by the `consul-data-gen kv` subcommand.
